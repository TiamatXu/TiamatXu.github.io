# 项目一：分布式“任务调度与执行系统”

## 概念

**异步任务调度平台**：  
前端（API）提交任务 → 后端协调调度 → 分布式节点执行 → 回传结果。

## 技术整合

| 技术点           | 作用                                       |
|---------------|------------------------------------------|
| **ZooKeeper** | 注册“任务执行节点”（Agent），实现分布式锁、选主。             |
| **Redis**     | 存放任务缓存、执行状态、心跳。                          |
| **Kafka**     | 任务消息分发、任务结果上报事件流。                        |
| **Dubbo**     | Java 版提供 RPC 服务：任务管理、节点通信。               |
| **Python**    | 作为执行节点（代理主机），用 Python 执行脚本／算法任务。         |
| **设计模式**      | 工厂（任务实例化）、观察者（监听任务事件）、策略（调度策略）、代理（节点调用）。 |

## 学习收获

*   消息驱动架构（Kafka）
*   服务注册发现（ZK + Dubbo）
*   缓存与状态同步（Redis）
*   跨语言 RPC（Java 调 Python）
*   每个模块都可以做设计模式的应用演示

## 扩展

后续还能演化成分布式爬虫平台、AI 任务调度系统、批处理系统。

## 功能模块拆解

### 1️⃣ 任务接入层（Task API）

*   提交任务（同步 / 异步）
*   查询任务状态
*   取消 / 重试任务

**技术**：

*   Java：Spring Boot + Dubbo Provider
*   Python：可做轻量 Client

**设计模式**

*   命令模式（TaskCommand）
*   DTO / Facade

### 2️⃣ 任务管理核心（Task Manager）

*   任务生命周期管理（PENDING / RUNNING / SUCCESS / FAILED）
*   任务拆分（大任务 → 子任务）
*   幂等控制

**技术**

*   Redis（状态机、TTL）
*   本地状态机 + Redis 同步

**设计模式**

*   状态模式
*   模板方法（统一任务执行流程）

### 3️⃣ 调度与协调模块（Scheduler）

*   节点选择
*   负载均衡
*   失败转移
*   分布式锁 / 选主

**技术**

*   ZooKeeper（节点注册、锁）
*   可替换调度策略

**设计模式**

*   策略模式（调度算法）
*   单例（ZK Client）

### 4️⃣ 消息总线（Event Bus）

*   任务下发
*   执行结果回传
*   事件通知

**技术**

*   Kafka
*   Topic：task-dispatch / task-result / task-event

**设计模式**

*   观察者模式
*   发布-订阅

### 5️⃣ 执行节点（Agent / Worker）

*   Python Agent（执行脚本、算法）
*   Java Agent（业务任务）

**能力**

*   心跳上报
*   拉取任务
*   上报结果

**设计模式**

*   工厂模式（TaskExecutor）
*   责任链（前置校验 → 执行 → 回传）

### 6️⃣ RPC 通信层

*   调度中心 ↔ 执行节点
*   管理服务 ↔ 查询服务

**技术**

*   Dubbo（Java 主）
*   Python Dubbo Client / 或 REST 替代

**设计模式**

*   代理模式（RPC Stub）

## 总结

> 这是一个「教科书级分布式系统练功项目」，你提到的所有中间件都不是“硬塞”，而是天然需要。
